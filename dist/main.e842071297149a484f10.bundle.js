(()=>{(()=>{"use strict";var a={};a.d=(e,t)=>{for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},a.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(e){if(typeof window=="object")return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");if(i.length)for(var s=i.length-1;s>-1&&(!e||!/^http(s?):/.test(e));)e=i[s--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})();var ae={};a.d(ae,{z:()=>F});const ut=a.p+"sprites/cave_ceiling.png",wt=a.p+"sprites/cave_openingdoor.png",bt=a.p+"sprites/black_block.png",_t=a.p+"sprites/bushV1.png",St=a.p+"sprites/slime_spritesheet.png",yt=a.p+"sprites/slimeSuper_spritesheet.png",Tt=a.p+"sprites/shadewalker_Spritesheet.png",kt=a.p+"sprites/shadeKeeper_Spritesheet.png",Mt=a.p+"sprites/playerAttack_Spritesheet.png",Ct=a.p+"sprites/character_spritesheet.png",At=a.p+"sprites/cliffgrass_side.png",Et=a.p+"sprites/dirt_terrian.png",Bt=a.p+"sprites/cave_terrain.png",Pt=a.p+"sprites/grass1.png",Yt=a.p+"sprites/cave_wall.png",Lt=a.p+"sprites/caveentrance_open.png",Kt=a.p+"sprites/cliffgrass_all.png",Rt=a.p+"sprites/cliff_front.png",Xt=a.p+"sprites/cliffgrass_bottomleft.png",Ht=a.p+"sprites/cliffgrass_back.png",Ft=a.p+"sprites/cliffgrass_front.png",Wt=a.p+"sprites/cliffgrass_bottomright.png",It=a.p+"sprites/cliffgrass_topbottom.png",Ot=a.p+"sprites/cliffgrass_leftside.png",$t=a.p+"sprites/cliffgrass_topright.png",Gt=a.p+"sprites/cliffgrass_topleft.png",Nt=a.p+"sprites/cliffgrass_uprightbottom.png",Ut=a.p+"sprites/cliffgrass_upleftbottom.png",W="sprites/slime_spritesheet.png",I="sprites/slimeSuper_spritesheet.png",O="sprites/shadewalker_Spritesheet.png",$="sprites/shadeKeeper_Spritesheet.png",Dt={slimeSprite:W,slimeSuperSprite:I,shadeWalkerSprite:O,shadeKeeperSprite:$},re={sprite:$,name:"Shade Keeper",health:155,defense:0,damage:13,goldReward:50,experienceReward:300},G={sprite:O,name:"Shade Walker",health:90,defense:0,damage:9,goldReward:25,experienceReward:100},C={sprite:I,name:"Slime Super",health:80,defense:0,damage:7,goldReward:15,experienceReward:85},d={sprite:W,name:"Green Slime",health:35,defense:0,damage:3,goldReward:5,experienceReward:35};class N{constructor(t){this.fps=t,this.now,this.currentTime=Date.now(),this.interval=1e3/this.fps,this.delta}fpsLimiter(){return this.now=Date.now(),this.delta=this.now-this.currentTime,this.delta>this.interval}updateCurrentTime(){this.currentTime=this.now-this.delta%this.interval}}const p={animationid:{id:void 0}},U=new N(60),_=e=>{p.animationid.id=requestAnimationFrame(()=>{_(e)}),U.fpsLimiter()&&(U.updateCurrentTime(),e.player.keyboard.escapeToggle>0?e.player.keyboard.checkToDisplayUserMenu(e.player):(e.player.keyboard.keyboardPlayerMovement(),e.gameScene.draw(e.player),e.player.render()))},le=(e,t,i,s)=>{const l=e.x>=t-s&&e.x<=t,n=e.y>=i-s&&e.y<=i;return l&&n},ne=(e,t,i,s)=>{let l=e-i,n=t-s;return Math.sqrt(Math.pow(l,2)+Math.pow(n,2))},w=(e,t,i)=>{for(let s=0;s<t.length;s++){const l=t[s],{gameScene:n,transferX:u,transferY:M}=l;le(e,u,M,e.size)&&(cancelAnimationFrame(i),e.setPlayerCoordinates(l.arriveX,l.arriveY),_({player:e,gameScene:n}))}},A=(e,t)=>{for(let i=0;i<t.length;i++)e.draw(t[i].x,t[i].y)};class he{constructor(t,i,s){this.width=i,this.height=s,this.canvas=document.getElementById(t),this.context=this.canvas.getContext("2d"),this.canvas.setAttribute("width",this.width.toString()),this.canvas.setAttribute("height",this.height.toString()),this.canvas.setAttribute("style",`width: ${this.width}px; height: ${this.height}px;`)}}const oe=()=>{const e=document.createElement("canvas");return e.id="gameCanvas",e.width=640,e.height=480,e};document.getElementById("game-container").appendChild(oe());const h=new he("gameCanvas",640,480),ce=32,de=32,fe=32;class pe{constructor(t,i,s){this.delay=t,this.indexCounter=i,this.currentFrame=s}}const ge=10;function me(e,t){var i=e%t,s=Math.floor(e/t);return[i,s]}function ve(e,t,i){return t*i+e}const ue={i2xy:(e,t)=>me(e,t),xy2i:(e,t,i)=>ve(e,t,i)};let f=0,g=[];function we(e){let t=e.spriteSheet;const i=-2;if(t===void 0){h.context.drawImage(e.sprite,e.x,e.y,ce,de);return}if(t.length!=null&&t.length>0){g[f].delay++>=3&&(g[f].delay=i,g[f].indexCounter++,g[f].indexCounter>=t.length&&(g[f].indexCounter=0),g[f].currentFrame=t[g[f].indexCounter]);var s=ue.i2xy(g[f].currentFrame,3);h.context.drawImage(e.sprite,s[0]*32,s[1]*32,32,32,e.x,e.y,32,32),f++}}function be(){for(var e=0;e<ge;e++)g[e]=new pe(0,0,0)}function m(){f=0}class r{constructor(t){this.filepath=t,this.TO_RADIANS=Math.PI/180,this.image=null,this.is_pattern=!1,this.pattern=null,this.pattern_x_times=0,this.load=function(i){return this.image=new Image,this.image.src=i,this},this.to_pattern=function(i){this.pattern_x_times=i,this.pattern=h.context.createPattern(this.image,"repeat"),this.is_pattern=!0},this.spritesheet=null,this.filepath?this.load(this.filepath):console.log(`Unable to load sprite. Filename ${t} is not defined`)}draw(t,i,s){const l={x:t,y:i,spriteSheet:s,sprite:this.image};we(l)}}const E=new r("sprites/dirt_terrian.png"),D=new r("sprites/cave_terrain.png"),q=new r("sprites/grass1.png"),Vt={dirt_terrain:E,cave_terrain:D,grass_terrain:q},S=new r("sprites/black_block.png"),_e=new r("sprites/bushV1.png"),B={blackblock:S,bush:_e},Se=new r("sprites/cliffgrass_back.png"),ye=new r("sprites/cliffgrass_front.png"),Te=new r("sprites/cliffgrass_leftside.png"),ke=new r("sprites/cliffgrass_side.png"),Me=new r("sprites/cliff_front.png"),Ce=new r("sprites/cliffgrass_topright.png"),Ae=new r("sprites/cliffgrass_all.png"),Ee=new r("sprites/cliffgrass_bottomright.png"),Be=new r("sprites/cliffgrass_bottomleft.png"),Pe=new r("sprites/cliffgrass_topleft.png"),Ye=new r("sprites/cliffgrass_uprightbottom.png"),Le=new r("sprites/cliffgrass_topbottom.png"),Ke=new r("sprites/caveentrance_open.png"),Re=new r("sprites/cliffgrass_upleftbottom.png"),Xe={cliffentrance_open:Ke,cliff_front:Me,cliffgrass_front:ye,cliffgrass_back:Se,cliffgrass_left:Te,cliffgrass_right:ke,cliffgrass_topright:Ce,cliffgrass_bottomright:Ee,cliffgrass_bottomleft:Be,cliffgrass_topleft:Pe,cliffgrass_toprightbottom:Ye,cliffgrass_topbottom:Le,cliffgrass_topleftbottom:Re,cliffgrass_all:Ae};var He=Object.defineProperty,z=Object.getOwnPropertySymbols,Fe=Object.prototype.hasOwnProperty,We=Object.prototype.propertyIsEnumerable,V=(e,t,i)=>t in e?He(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Ie=(e,t)=>{for(var i in t||(t={}))Fe.call(t,i)&&V(e,i,t[i]);if(z)for(var i of z(t))We.call(t,i)&&V(e,i,t[i]);return e};const P=3,Y={blackblock:S,dirt_terrain:E},L=Ie({grass_terrain:q,dirt_terrain:E},Xe),jt=(e,t)=>{const{x:i,y:s}=K(e,t);console.log({x:i,y:s})},K=(e,t)=>{const i=e.getBoundingClientRect(),s=Math.ceil(t.x-i.left),l=Math.ceil(t.y-i.top);return{x:s,y:l}},Oe=(e,t)=>{!t.battleTurn&&!e.disableAttack&&(e.battleTurn=!0,e.disableAttack=!0,e.battleMoveForward=!0)},$e=(e,t,i,s)=>{const{x:l,y:n}=K(i,s);return e.fighting&&l>507&&n>184&&l<565&&n<200&&Oe(e,t),{x:l,y:n}};class Ge{constructor(t,i){this.canvas=h.canvas,this.addBattleEventListeners=()=>this.canvas.addEventListener("mousedown",this.battleEventHandler),this.removeBattleEventListeners=()=>this.canvas.removeEventListener("mousedown",this.battleEventHandler),this.battleEventHandler=s=>$e(this.player,this.enemy,this.canvas,s),this.player=t,this.enemy=i}}function Ne(e,t){e.beginPath(),e.fillStyle="rgba(77, 150, 255, 0.9)",e.fill(),e.fillRect(315,40,165,75),e.closePath(),e.font="bold 1.2em Arial",screen.width<=699&&(e.font="bold 1.3em Arial"),e.shadowColor="black",e.shadowBlur=1,e.lineWidth=1,e.strokeText("Player",365,75),e.strokeText(`HP: ${t.health}/${t.maxHealth}`,345,95),e.shadowBlur=0,e.fillStyle="white",t.health<t.maxHealth/3&&(e.fillStyle="Crimson"),e.fillText("Player",365,75),e.fillText(`HP: ${t.health}/${t.maxHealth}`,345,95),e.fill()}function Ue(e,t){e.beginPath(),e.fillStyle="rgba(125, 50, 75, 1)",e.fill(),e.fillRect(142,40,165,75),e.closePath(),e.font="bold 1.2em Arial",screen.width<=699&&(e.font="bold 1.3em Arial"),e.shadowColor="black",e.shadowBlur=1,e.lineWidth=1,e.strokeText(t.name,170,75),e.strokeText(`HP: ${t.health}/${t.totalHealth}`,185,95),e.shadowBlur=0,e.fillStyle="white",e.fillText(t.name,170,75),t.health<t.totalHealth/3&&(e.fillStyle="Crimson"),e.fillText(`HP: ${t.health}/${t.totalHealth}`,185,95)}function De(e,t){e.beginPath(),e.fillStyle="rgba(77,150,255,0.9)",e.fill(),e.fillRect(475,125,125,300),e.closePath(),e.font="bold 1.2em Arial",screen.width<=699&&(e.font="bold 1.3em Arial"),e.shadowColor="black",e.shadowBlur=1,e.lineWidth=1,e.strokeText("Potions",507,350),e.strokeText("Special",507,275),e.strokeText("Attack",507,200),e.shadowBlur=0,e.fillStyle="grey",e.fillText("Potions",507,350),e.fillText("Special",507,275),e.fillStyle="white",t.disableAttack&&(e.fillStyle="grey"),e.fillText("Attack",507,200)}function qe(e,t){e.beginPath(),e.fillStyle="rgba(77,150,255,0.9)",e.fill(),e.fillRect(190,350,260,75),e.closePath(),e.font="bold 1.2em Arial",screen.width<=699&&(e.font="bold 1.3em Arial"),e.shadowColor="black",e.shadowBlur=1,e.lineWidth=1,e.strokeText(`${t.name} Slain!`,200,370),e.strokeText(`+${t.goldReward} gold coins`,200,395),e.strokeText(`+${t.experienceReward} Experience`,200,420),e.shadowBlur=0,e.fillStyle="white",e.fillText(`${t.name} Slain!`,200,370),e.fillText(`+${t.goldReward} gold coins`,200,395),e.fillText(`+${t.experienceReward} Experience`,200,420)}function ze(e,t){e.beginPath(),e.fillStyle="rgba(77, 150, 255, 0.9)",e.fill(),e.fillRect(190,435,260,35),e.closePath(),e.font="bold 1.2em Arial",screen.width<=699&&(e.font="bold 1.3em Arial"),e.shadowColor="black",e.shadowBlur=1,e.lineWidth=1,e.strokeText(`Reached level ${t.level}!`,240,458),e.shadowBlur=0,e.fillStyle="white",e.fillText(`Reached level ${t.level}!`,240,458)}function Ve(e){e.beginPath(),e.fillStyle="rgba(77, 150, 255, 0.9)",e.fill(),e.fillRect(190,350,260,35),e.closePath(),e.font="bold 1.2em Arial",screen.width<=699&&(e.font="bold 1.3em Arial"),e.shadowColor="black",e.shadowBlur=1,e.lineWidth=1,e.strokeText("You have fallen in battle!",207,375),e.shadowBlur=0,e.fillStyle="white",e.fillText("You have fallen in battle!",207,375)}class v{constructor(t,i,s){this.mapArr=t,this.tileObj=i,this.player=s,this.BLOCK_W=32,this.BLOCK_H=32}renderTile(t,i,s,l){let n=Object.keys(t);t[n[i]].draw(s,l)}tileCollision(t){if(t.tileIndex>=t.tileCollisionMin){if(t.tileY+20<this.player.y){this.player.y+=2;return}if(t.tileY-10>this.player.y){this.player.y-=2;return}if(t.tileX-10>this.player.x){this.player.x-=2;return}if(t.tileX+20<this.player.x){this.player.x+=2;return}}}renderMap(t){let i=0;for(let s=0;s<15;s++)for(let l=0;l<20;l++,i++){let n=l*this.BLOCK_W,u=s*this.BLOCK_H,M=this.mapArr[i],vt={tileX:n,tileY:u,tileIndex:M,tileCollisionMin:t};this.player.moving&&this.player.x+20>n&&this.player.x-30<n&&this.player.y+30>u&&this.player.y-25<u&&this.tileCollision(vt),this.renderTile(this.tileObj,M,n,u)}}}const je=(e,t)=>{const{x:i,y:s}=K(e,t);i>215&&s>112&&i<405&&s<143&&(Ze(),F())},j=e=>{je(h.canvas,e)},Z=()=>h.canvas.addEventListener("mousedown",j),Ze=()=>h.canvas.removeEventListener("mousedown",j);function Je(e){e.beginPath(),e.fillStyle="rgba(97, 176, 250, 1)",e.fill(),e.fillRect(0,0,e.canvas.offsetWidth,e.canvas.offsetHeight),e.closePath(),e.shadowColor="black",e.shadowBlur=1,e.lineWidth=1,e.font="bold 2em Arial",e.strokeText("Play Again?",230,140),e.shadowBlur=0,e.font="bold 2.5em Arial",e.fillStyle="rgba(15, 15, 15, 1)",e.fillText("You beat the game!",135,90),e.fillStyle="white",e.font="bold 2em Arial",e.fillText("Play Again?",230,140),e.fill()}function Qe(e){e.beginPath(),e.fillStyle="rgba(34, 34, 34, 1)",e.fill(),e.fillRect(0,0,e.canvas.offsetWidth,e.canvas.offsetHeight),e.closePath(),e.shadowColor="black",e.shadowBlur=1,e.lineWidth=1,e.font="bold 3em Arial",e.strokeText("You have died!",145,90),e.font="bold 2em Arial",e.strokeText("Play Again?",220,140),e.shadowBlur=0,e.font="bold 3em Arial",e.fillStyle="Crimson",e.fillText("You have died!",145,90),e.fillStyle="white",e.font="bold 2em Arial",e.fillText("Play Again?",220,140),e.fill()}const xe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class et{constructor(t,i){this.limiter=new N(60),this.victoryScreen=!1,this.deathScreen=!1,this.currentPlayerLevel=0,this.currentPlayerLevel=t,this.battleEventManager=i,this.battleEventManager.addBattleEventListeners()}draw(t,i,s){const l=this;p.animationid.id=requestAnimationFrame(()=>{l.draw(t,i,s)}),this.limiter.fpsLimiter()&&(this.limiter.updateCurrentTime(),new v(xe,s.battleMapSprites,t).renderMap(-1),De(h.context,t),Ne(h.context,t),Ue(h.context,i),t.render(),i.render(),t.basicAttackSequence(t,i),i.basicAttackSequence(i,t),t.victory&&this.playerDefeatedEnemy(t,i,s),t.dead&&this.playerDiedInBattle(t),m())}playerDefeatedEnemy(t,i,s){qe(h.context,i),this.currentPlayerLevel!==t.level&&ze(h.context,t),this.victoryScreen||(this.victoryScreen=!0,t.rewardFromBattle(i),setTimeout(()=>{this.stopBattleEvent(),i.endGame?(t.keyboard.removeKeyboardEvents(),Z(),Je(h.context)):(t.resetToDefaultState(i),_({player:t,gameScene:s}))},2e3))}playerDiedInBattle(t){Ve(h.context),this.deathScreen||(this.deathScreen=!0,setTimeout(()=>{t.keyboard.removeKeyboardEvents(),this.stopBattleEvent(),Z(),Qe(h.context)},2e3))}stopBattleEvent(){this.battleEventManager.removeBattleEventListeners(),cancelAnimationFrame(p.animationid.id)}}const J={basicAttackSprite:new r("sprites/playerAttack_Spritesheet.png"),playerSprite:"sprites/character_spritesheet.png"};class o{constructor(t,i,s){this.enemySprite=new r(t.sprite),this.health=t.health,this.name=t.name,this.totalHealth=t.health,this.defense=t.defense,this.damage=t.damage,this.goldReward=t.goldReward,this.experienceReward=t.experienceReward,this.direction=[1,1,2],this.startX=i,this.startY=s,this.patrolled=!1,this.x=i,this.y=s,this.fighting=!1,this.battleMoveForward=!1,this.battleMoveBackward=!1,this.battleTurn=!1,this.dead=!1}process(t,i,s){this.dead||(this.render(),this.patrol&&this.patrol(s.patrol.patToX,s.patrol.patToY),this.fightPlayer(t,i))}render(){this.enemySprite.image.width=32,this.enemySprite.image.height=32,this.enemySprite.draw(this.x,this.y,this.direction)}fightPlayer(t,i){if(ne(this.x,this.y,t.x,t.y)<=32){const s=new Ge(t,this),l=new et(t.level,s);cancelAnimationFrame(p.animationid.id),t.fighting=!0,t.direction=[3,4,5],t.x=350,t.y=225,this.aggroX=this.x,this.aggroY=this.y,this.x=250,this.y=225,this.direction=[6,7,8],l.draw(t,this,i)}}basicAttackSequence(t,i){if(t.battleTurn&&!i.dead){if(!t.battleMoveBackward&&t.battleMoveForward&&t.x<=320&&(t.x+=2,t.x>312&&J.basicAttackSprite.draw(i.x,i.y,[0,0,0]),t.x===320&&(i.health=Math.max(i.health-t.damage*2,0),setTimeout(()=>{t.battleMoveForward=!1,t.battleMoveBackward=!0},150),i.health<=0))){i.dead=!0,i.direction=[0,0,0];return}!t.battleMoveForward&&t.battleMoveBackward&&t.x>=252&&(t.x-=2,t.x===250&&(t.battleTurn=!1,t.battleMoveBackward=!1,i.disableAttack=!1))}}}const c=e=>({patrol:(t,i)=>{t&&Q({entity:e,entityCoordinate:e.x,entityStartCoordinate:e.startX,patrolToCoordinate:t,entityCoordinateProp:"x"}),i&&Q({entity:e,entityCoordinate:e.y,entityStartCoordinate:e.startY,patrolToCoordinate:i,entityCoordinateProp:"y"})}});function tt(e){e.entityCoordinate===e.patrolToCoordinate&&(e.entity.patrolled=!0),e.entityCoordinate===e.entityStartCoordinate&&(e.entity.patrolled=!1)}function Q(e){tt(e),e.entity.patrolled&&(e.patrolToCoordinate=e.entityStartCoordinate),e.entityCoordinate>e.patrolToCoordinate&&(e.entity[e.entityCoordinateProp]-=1,e.entity.direction=[3,4,5]),e.entityCoordinate<e.patrolToCoordinate&&(e.entity[e.entityCoordinateProp]+=1,e.entity.direction=[6,7,8])}const it=[0,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,7,3,3,3,3,3,3,3,3,3,3,3,6,0,0,0,0,4,4,4,7,1,1,1,1,1,1,1,1,1,1,1,6,0,0,0,7,3,3,3,7,1,11,5,5,13,13,13,13,13,12,1,6,0,4,4,9,1,1,1,7,1,6,0,7,3,3,3,3,3,3,1,6,7,3,3,3,1,11,5,7,1,6,0,7,1,1,1,1,1,1,1,6,7,1,1,1,1,6,0,7,1,6,0,7,1,15,1,15,1,1,11,0,0,5,5,8,1,6,0,7,1,6,0,7,1,1,1,1,1,1,6,0,0,0,0,7,1,6,0,7,1,6,0,0,5,5,5,8,1,11,0,0,0,0,0,7,1,6,0,7,1,6,0,0,0,0,0,7,1,6,0,0,0,0,0,7,1,6,0,9,1,6,0,0,0,0,0,7,1,10,4,4,4,4,4,9,1,6,0,1,1,6,0,0,0,0,0,7,1,3,3,3,3,3,3,3,1,6,0,5,5,0,0,0,0,0,0,7,1,1,1,1,1,1,1,1,1,6,0,0,0,0,0,0,0,0,0,0,5,5,5,5,5,5,5,5,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],st=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,7,3,3,3,3,3,3,3,6,0,0,0,0,0,0,0,0,0,0,0,7,1,1,1,1,1,1,1,10,4,0,0,0,0,0,0,0,0,0,0,7,1,1,1,1,1,1,1,3,3,6,0,0,0,0,0,0,0,0,0,7,1,1,1,1,1,1,1,1,1,6,0,0,0,0,0,0,0,0,0,0,8,1,1,1,1,1,1,1,1,6,0,0,0,0,0,0,0,0,0,0,0,5,5,5,8,1,14,13,13,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,7,1,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,7,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,5,5,5,5,5,5,5,5,5,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],at=[0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,4,4,4,4,9,3,3,3,3,3,3,3,3,3,3,3,3,6,0,0,3,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1,1,6,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,6,0,0,5,5,5,5,8,1,1,1,1,1,1,1,1,1,1,1,1,6,0,0,0,0,0,0,7,1,1,1,1,1,1,1,1,1,11,5,5,6,0,0,0,0,0,0,7,1,1,1,1,1,1,1,1,11,6,0,0,6,0,0,0,0,0,0,7,1,1,1,1,1,1,1,1,6,10,4,4,6,0,0,0,0,0,0,0,5,8,1,1,1,1,1,1,10,3,3,3,6,0,0,0,0,0,0,0,0,0,8,1,1,1,1,1,3,3,2,3,6,0,0,0,0,0,0,0,0,0,7,1,1,1,1,1,1,1,1,1,6,0,0,0,0,0,0,0,0,0,0,5,5,5,5,5,5,5,5,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class rt{constructor(){this.sceneMapSprites=L,this.battleMapSprites=Y,this.miscEntities=[{x:230,y:300},{x:400,y:250},{x:425,y:10},{x:120,y:100},{x:125,y:350}],this.tileCollisionMin=P,this.slimeMidBottom=new o(d,300,215),Object.assign(this.slimeMidBottom,c(this.slimeMidBottom)),this.slimeMidTop=new o(d,325,155),Object.assign(this.slimeMidTop,c(this.slimeMidTop)),this.slimeBottom=new o(d,285,275),Object.assign(this.slimeBottom,c(this.slimeBottom)),this.slimeRight=new o(d,525,155),Object.assign(this.slimeRight,c(this.slimeRight)),this.slimeLeft=new o(d,75,55),Object.assign(this.slimeLeft,c(this.slimeLeft)),this.slimeSuper=new o(C,542,93)}draw(t){new v(it,this.sceneMapSprites,t).renderMap(this.tileCollisionMin),A(B.bush,this.miscEntities),w(t,this.transferScenes,p.animationid.id),this.slimeMidBottom.process(t,this,{patrol:{patToX:200,patToY:void 0}}),this.slimeMidTop.process(t,this,{patrol:{patToX:250,patToY:void 0}}),this.slimeBottom.process(t,this,{patrol:{patToX:void 0,patToY:380}}),this.slimeRight.process(t,this,{patrol:{patToX:450,patToY:void 0}}),this.slimeLeft.process(t,this,{patrol:{patToX:300,patToY:void 0}}),this.slimeSuper.process(t,this),m()}setTransferScenes(t){this.transferScenes=t}}class lt{constructor(){this.sceneMapSprites=L,this.battleMapSprites=Y,this.tileCollisionMin=P,this.miscEntities=[{x:47,y:200},{x:174,y:71},{x:533,y:86},{x:332,y:435},{x:299,y:48}],this.slimeMidBottom=new o(d,355,345),Object.assign(this.slimeMidBottom,c(this.slimeMidBottom)),this.slimeCenterTop=new o(d,350,197),Object.assign(this.slimeCenterTop,c(this.slimeCenterTop)),this.slimeCenterBottom=new o(d,199,250),Object.assign(this.slimeCenterBottom,c(this.slimeCenterBottom)),this.slimeSuper=new o(C,259,164)}draw(t){new v(st,this.sceneMapSprites,t).renderMap(this.tileCollisionMin),A(B.bush,this.miscEntities),w(t,this.transferScenes,p.animationid.id),this.slimeCenterTop.process(t,this,{patrol:{patToX:190,patToY:void 0}}),this.slimeCenterBottom.process(t,this,{patrol:{patToX:401,patToY:void 0}}),this.slimeMidBottom.process(t,this,{patrol:{patToX:520,patToY:void 0}}),this.slimeSuper.process(t,this),m()}setTransferScenes(t){this.transferScenes=t}}class nt{constructor(){this.sceneMapSprites=L,this.battleMapSprites=Y,this.tileCollisionMin=P,this.miscEntities=[{x:450,y:400},{x:495,y:185},{x:575,y:75},{x:50,y:175},{x:125,y:350}],this.slimeSuper=new o(C,429,315),this.slimeTop=new o(d,175,115),Object.assign(this.slimeTop,c(this.slimeTop)),this.slimeMiddle=new o(d,255,270),Object.assign(this.slimeMiddle,c(this.slimeMiddle))}draw(t){new v(at,this.sceneMapSprites,t).renderMap(this.tileCollisionMin),A(B.bush,this.miscEntities),this.slimeSuper.process(t,this),this.slimeTop.process(t,this,{patrol:{patToX:350,patToY:void 0}}),this.slimeMiddle.process(t,this,{patrol:{patToX:350,patToY:void 0}}),w(t,this.transferScenes,p.animationid.id),m()}setTransferScenes(t){this.transferScenes=t}}const R=new r("sprites/cave_wall.png"),x=new r("sprites/cave_ceiling.png"),ee=new r("sprites/cave_openingdoor.png"),Qt={cave_wall:R,cave_ceiling:x,cave_opening:ee},te=3,ie={blackblock:S,cave_wall:R},se={blackblock:S,cave_wall:R,cave_opening:ee,cave_terrain:D,cave_ceiling:x},ht=[0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,3,3,2,3,4,0,0,0,0,4,4,4,4,4,4,0,0,0,0,4,1,1,1,1,4,0,0,0,0,4,3,3,3,3,4,4,0,0,0,4,1,1,1,1,4,0,0,0,0,4,1,1,1,1,3,4,0,0,0,4,1,1,1,4,4,0,0,0,0,4,1,1,1,1,1,4,4,0,4,4,4,1,1,4,3,0,0,0,0,4,4,4,4,4,1,1,4,4,4,3,3,1,1,4,3,0,0,0,0,3,3,3,3,4,1,1,3,4,3,1,1,1,1,4,0,0,0,0,0,0,0,0,0,4,1,1,1,4,1,1,1,4,4,4,0,0,0,0,0,0,0,0,0,4,1,1,1,3,1,1,1,4,3,3,0,0,0,0,0,0,0,0,0,4,4,1,1,1,1,1,4,4,0,0,0,0,0,0,0,0,0,0,0,3,4,4,1,1,1,4,4,3,0,0,0,0,0,0,0,0,0,0,0,0,3,4,4,1,4,4,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,4,1,4,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,1,4,0,0,0,0,0,0,0,0],ot=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,3,3,3,3,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,1,1,1,1,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,4,1,1,1,1,3,3,3,4,4,0,0,0,0,0,0,0,0,0,0,4,1,1,1,1,1,1,1,3,4,0,0,0,0,0,0,0,0,0,0,4,1,1,1,1,1,1,1,1,4,0,0,0,0,0,0,0,0,0,0,4,1,1,1,1,4,4,1,1,4,4,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,1,1,3,4,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,4,1,1,1,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,1,1,1,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,1,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,4,1,4,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,1,4,0,0,0,0];class ct{constructor(){this.sceneMapSprites=se,this.battleMapSprites=ie,this.tileCollisionMin=te,this.shadeWalkerLeft=new o(G,100,150),Object.assign(this.shadeWalkerLeft,c(this.shadeWalkerLeft)),this.shadeWalkerRight=new o(G,480,65)}draw(t){new v(ht,this.sceneMapSprites,t).renderMap(this.tileCollisionMin),this.shadeWalkerLeft.process(t,this,{patrol:{patToX:200,patToY:void 0}}),this.shadeWalkerRight.process(t,this),w(t,this.transferScenes,p.animationid.id),m()}setTransferScenes(t){this.transferScenes=t}}class dt{constructor(){this.sceneMapSprites=se,this.battleMapSprites=ie,this.tileCollisionMin=te,this.shadeKeeper=new o(re,275,200),this.shadeKeeper.direction=[6,6,7],this.shadeKeeper.endGame=!0}draw(t){new v(ot,this.sceneMapSprites,t).renderMap(this.tileCollisionMin),this.shadeKeeper.process(t,this),w(t,this.transferScenes,p.animationid.id),m()}setTransferScenes(t){this.transferScenes=t}}var b,X,y,T,H;const ft=()=>{b=new rt,X=new lt,y=new nt,T=new ct,H=new dt,b.setTransferScenes([{gameScene:X,transferX:0,transferY:356,arriveX:585,arriveY:352},{gameScene:y,transferX:635,transferY:120,arriveX:40,arriveY:95}]),X.setTransferScenes([{gameScene:b,transferX:630,transferY:355,arriveX:30,arriveY:346}]),y.setTransferScenes([{gameScene:b,transferX:9,transferY:100,arriveX:590,arriveY:95},{gameScene:T,transferX:495,transferY:310,arriveX:320,arriveY:427}]),T.setTransferScenes([{gameScene:y,transferX:330,transferY:480,arriveX:485,arriveY:325},{gameScene:H,transferX:496,transferY:52,arriveX:450,arriveY:436}]),H.setTransferScenes([{gameScene:T,transferX:460,transferY:475,arriveX:484,arriveY:75}])};class pt{constructor(t){this.player=t,this.w=!1,this.a=!1,this.s=!1,this.d=!1,this.keyBoardOff=!1,this.escapeToggle=0,this.KEY_W="w",this.KEY_A="a",this.KEY_S="s",this.KEY_D="d",this.KEY_ESCAPE="escape"}inputKeyDown(t){{if(this.player.dead)return;if(this.player.fighting){this.player.moving=!1,this.setKeysToFalse();return}switch(t.key.toLowerCase()){case this.KEY_W:this.w=!0,this.player.moving=!0;break;case this.KEY_A:this.a=!0,this.player.moving=!0;break;case this.KEY_S:this.s=!0,this.player.moving=!0;break;case this.KEY_D:this.d=!0,this.player.moving=!0;break;case this.KEY_ESCAPE:this.escapeToggle++;break;default:break}}}inputKeyUp(t){if(!this.player.dead){if(this.player.fighting){this.player.moving=!1,this.setKeysToFalse();return}switch(t.key){case this.KEY_W:this.w=!1,this.player.direction=[9];break;case this.KEY_A:this.a=!1,this.player.direction=[3];break;case this.KEY_S:this.s=!1,this.player.direction=[0];break;case this.KEY_D:this.d=!1,this.player.direction=[6];break;case this.KEY_ESCAPE:break;default:break}!this.KEY_W&&!this.KEY_A&&!this.KEY_S&&!this.KEY_D&&(this.player.moving=!1)}}removeKeyboardEvents(){window.removeEventListener("keydown",t=>this.inputKeyDown(t)),window.removeEventListener("keyup",t=>this.inputKeyUp(t))}intializeKeyBoardEvents(){window.addEventListener("keydown",t=>this.inputKeyDown(t)),window.addEventListener("keyup",t=>this.inputKeyUp(t))}keyboardPlayerMovement(){if(!this.player.dead){if(this.player.fighting){this.player.moving=!1,this.setKeysToFalse();return}this.w&&(this.player.y-=2,this.player.direction=[9,10,11]),this.a&&(this.player.x-=2,this.player.direction=[3,4,5]),this.s&&(this.player.y+=2,this.player.direction=[0,1,2]),this.d&&(this.player.x+=2,this.player.direction=[6,7,8])}}checkToDisplayUserMenu(t){t.displayPlayerMenu(),this.escapeToggle===2&&(this.escapeToggle=0)}setKeysToFalse(){this.w=!1,this.a=!1,this.s=!1,this.d=!1}}function gt(e,t){function i(){e.beginPath(),e.fillStyle="rgba(161, 255, 173, .8)",e.fillRect(0,0,e.canvas.offsetWidth,e.canvas.offsetHeight),e.closePath(),e.fill()}function s(){e.beginPath(),e.fillStyle="white",e.moveTo(650,200),e.lineTo(0,200),e.stroke(),e.closePath(),e.beginPath(),e.font="bold 1.5em Arial",e.fillStyle="black",e.fillText("Stats",30,40),e.font="bold 1em Arial",e.fillText("DMG: "+t.damage,30,80),e.font="bold 1em Arial",e.fillText("STR: "+t.strength,30,110),e.font="bold 1em Arial",e.fillText("AGI: "+t.agility,30,140),e.font="bold 1em Arial",e.fillStyle="black",e.fillText("DEF: "+t.defense,30,170),e.font="bold 1em Arial",e.fillStyle="black",e.fillText("HP: "+t.health+"/"+t.maxHealth,210,80),e.font="bold 1em Arial",e.fillStyle="black",e.fillText("Crit Chance: "+t.critchance+"%",210,110),e.font="bold 1.5em Arial",e.fillStyle="black",e.fillText("Information",30,240),e.font="bold 1em Arial",e.fillStyle="black",e.fillText("Level: "+t.level,30,280),e.font="bold 1em Arial",e.fillStyle="black",e.fillText("XP: "+t.experience,30,310),e.font="bold 1em Arial",e.fillStyle="black",e.fillText("XP till level: "+t.getNextPlayerLevelExperience(),30,340),e.font="bold 1em Arial",e.fillStyle="black",e.fillText("Gold: "+t.gold,30,370),e.fill(),e.closePath()}i(),s()}const k={2:{xp:85},3:{xp:350},4:{xp:610},5:{xp:943},6:{xp:1031}};class mt{constructor(t){this.playerSprite=new r(t),this.size=fe,this.strength=5,this.stamina=10,this.agility=6,this.luck=3,this.intelligence=4,this.health=100,this.maxHealth=100,this.defense=0,this.level=1,this.critchance=this.calculateCritChance(),this.direction=[0,0,0],this.x=30,this.y=90,this.damage=this.calculateDamage(),this.moving=!1,this.gold=0,this.experience=0,this.fighting=!1,this.battleTurn=!1,this.battleMoveForward=!1,this.battleMoveBackward=!1,this.disableAttack=!1,this.victory=!1,this.keyboard=new pt(this),this.dead=!1}render(){this.playerSprite.image.width=32,this.playerSprite.image.height=32,this.playerSprite.draw(this.x,this.y,this.direction)}rewardFromBattle(t){this.gold+=t.goldReward,this.processNewExperience(t.experienceReward)}processNewExperience(t){this.experience+=t,this.canPlayerLevel()&&this.levelPlayer()}canPlayerLevel(){if(Object.keys(k).length===this.level)return!1;var t=k[this.level+1].xp;return this.experience>=t}getNextPlayerLevelExperience(){return Object.keys(k).length===this.level?"Reached Max Level":(k[this.level+1].xp-this.experience).toString()}levelPlayer(){this.level++,this.processNewLevel()}processNewLevel(){this.levelUpStats(),this.health=this.maxHealth}calculateDamage(){return Math.ceil(this.strength*2.3)}calculateCritChance(){return Math.ceil(12+this.agility/5)}levelUpStats(){this.strength+=Math.ceil(Math.random()*2),this.damage=this.calculateDamage(),this.stamina+=Math.ceil(Math.random()*2),this.maxHealth+=25+Math.ceil(this.stamina*.3),this.agility+=Math.ceil(Math.random()*4),this.critchance=this.calculateCritChance(),this.intelligence+=Math.ceil(Math.random()*2),this.luck+=Math.ceil(Math.random()*2)}setPlayerCoordinates(t,i){this.x=t,this.y=i}displayPlayerMenu(){gt(h.context,this)}basicAttackSequence(t,i){if(t.battleTurn){if(!t.battleMoveBackward&&t.battleMoveForward&&t.x>=280&&(t.x-=2,t.x<288&&J.basicAttackSprite.draw(i.x,i.y,[0,0,0]),t.x===280)){setTimeout(()=>{t.battleMoveForward=!1,t.battleMoveBackward=!0},150);let s=Math.random()*100<t.critchance?this.damage*2:this.damage;if(i.health-=s<i.health?s:i.health,i.health<=0){i.direction=[0,0,0],i.dead=!0,t.battleTurn=!1,t.battleMoveForward=!1,t.victory=!0;return}}!t.battleMoveForward&&t.battleMoveBackward&&t.x<=348&&(t.x+=2,t.x===350&&(t.battleTurn=!1,t.battleMoveBackward=!1,i.battleTurn=!0,i.battleMoveForward=!0))}}resetToDefaultState(t){this.victory=!1,this.disableAttack=!1,this.x=t.aggroX,this.y=t.aggroY,this.fighting=!1,this.direction=[0,0,0],this.battleMoveBackward=!1}}const F=()=>{ft();const e=new mt("sprites/character_spritesheet.png");e.keyboard.intializeKeyBoardEvents(),_({player:e,gameScene:b})};be(),F()})();})();

//# sourceMappingURL=main.e842071297149a484f10.bundle.js.map